<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
  <version>7.4</version>
  <template_groups>
    <template_group>
      <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
      <name>Templates</name>
    </template_group>
  </template_groups>
  <templates>
    <template>
      <uuid>e5cc2a8a065c4272866ee0277ccc417f</uuid>
      <template>Postfix</template>
      <name>Postfix</name>
      <groups>
        <group>
          <name>Templates</name>
        </group>
      </groups>
      <items>
        <item>
          <uuid>1c8f49187b15455d83acc4878e3dad81</uuid>
          <name>Number of mails in queue - active</name>
          <key>mailqueue-postfix-queue[active]</key>
          <delay>60</delay>
          <history>30d</history>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>d11d7de6c59c457cb4e5198a5afa4e2e</uuid>
              <expression>min(/Postfix/mailqueue-postfix-queue[active],900s)&gt;10</expression>
              <name>High active mail queue ({ITEM.LASTVALUE} mails)</name>
              <priority>AVERAGE</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <uuid>700897e349684fa6871d7f6de4e0abc9</uuid>
          <name>Number of mails in queue - deferred</name>
          <key>mailqueue-postfix-queue[deferred]</key>
          <delay>60</delay>
          <history>30d</history>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>862751ff1b1b45898958153d5f537d8c</uuid>
              <expression>min(/Postfix/mailqueue-postfix-queue[deferred],3600s)&gt;500</expression>
              <name>High deferred mail queue ({ITEM.LASTVALUE} mails)</name>
              <priority>WARNING</priority>
            </trigger>
            <trigger>
              <uuid>9451442409a147669d7610679337b0e4</uuid>
              <expression>min(/Postfix/mailqueue-postfix-queue[deferred],129600s)&gt;50</expression>
              <name>High old and deferred mail queue ({ITEM.LASTVALUE} mails)</name>
              <priority>WARNING</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <uuid>c39bb96edc4949ec8d4870b46fbda929</uuid>
          <name>SMTP service is running</name>
          <key>net.tcp.service[smtp]</key>
          <delay>90</delay>
          <history>7d</history>
          <valuemap>
            <name>Service state</name>
          </valuemap>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>3146b4eff0ba4f6bbc34ed946f1d147b</uuid>
              <expression>last(/Postfix/net.tcp.service[smtp])=0</expression>
              <name>SMTP server is down</name>
              <priority>HIGH</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <uuid>9a8f3c9bde1742b39f42717f55bb5f76</uuid>
          <name>Postfix version</name>
          <key>postfix.version</key>
          <delay>3600</delay>
          <history>30d</history>
          <value_type>CHAR</value_type>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>d4d4e2d541ef495588ee40547af214b3</uuid>
              <expression>(last(/Postfix/postfix.version,#1)&lt;&gt;last(/Postfix/postfix.version,#2))&gt;0</expression>
              <name>Postfix version has changed</name>
              <priority>INFO</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <uuid>0826095ad3084f758b3e119efa917608</uuid>
          <name>Number of $1 processes</name>
          <key>proc.num[master]</key>
          <delay>60</delay>
          <history>7d</history>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>80c2d40244824c75b1b5864b5279b1b6</uuid>
              <expression>last(/Postfix/proc.num[master])=0</expression>
              <name>No master process running</name>
              <priority>AVERAGE</priority>
            </trigger>
          </triggers>
        </item>
        <item>
          <uuid>c3cfc59df24544ba8cf5f3281bf38219</uuid>
          <name>Number of $1 processes</name>
          <key>proc.num[qmgr]</key>
          <delay>60</delay>
          <history>7d</history>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>a9345d29f4bb4fc69e49149b246d9409</uuid>
              <expression>last(/Postfix/proc.num[qmgr])=0</expression>
              <name>No qmgr process running</name>
              <priority>AVERAGE</priority>
              <dependencies>
                <dependency>
                  <name>No master process running</name>
                  <expression>last(/Postfix/proc.num[master])=0</expression>
                </dependency>
              </dependencies>
            </trigger>
          </triggers>
        </item>
        <item>
          <uuid>4e730eb8d0254d2caf4d65f3cc9473a6</uuid>
          <name>Number of $1 processes</name>
          <key>proc.num[tlsmgr]</key>
          <delay>60</delay>
          <history>7d</history>
          <tags>
            <tag>
              <tag>Application</tag>
              <value>Postfix</value>
            </tag>
          </tags>
          <triggers>
            <trigger>
              <uuid>ace606e0c2504c4f9c3d8d214c0ac620</uuid>
              <expression>last(/Postfix/proc.num[tlsmgr])=0</expression>
              <name>No tlsmgr process running</name>
              <priority>AVERAGE</priority>
              <dependencies>
                <dependency>
                  <name>No master process running</name>
                  <expression>last(/Postfix/proc.num[master])=0</expression>
                </dependency>
              </dependencies>
            </trigger>
          </triggers>
        </item>
      </items>
      <valuemaps>
        <valuemap>
          <uuid>9701ee0256984ed4b93ff8ae78822d7f</uuid>
          <name>Service state</name>
          <mappings>
            <mapping>
              <value>0</value>
              <newvalue>Down</newvalue>
            </mapping>
            <mapping>
              <value>1</value>
              <newvalue>Up</newvalue>
            </mapping>
          </mappings>
        </valuemap>
      </valuemaps>
    </template>
  </templates>
  <graphs>
    <graph>
      <uuid>fbd69836c10f48e49560d3c1b1008bce</uuid>
      <name>Postfix - mail queue</name>
      <show_triggers>NO</show_triggers>
      <type>STACKED</type>
      <show_legend>NO</show_legend>
      <ymin_type_1>FIXED</ymin_type_1>
      <graph_items>
        <graph_item>
          <color>00EE00</color>
          <item>
            <host>Postfix</host>
            <key>mailqueue-postfix-queue[active]</key>
          </item>
        </graph_item>
        <graph_item>
          <sortorder>1</sortorder>
          <color>0000C8</color>
          <item>
            <host>Postfix</host>
            <key>mailqueue-postfix-queue[deferred]</key>
          </item>
        </graph_item>
      </graph_items>
    </graph>
  </graphs>
</zabbix_export>
