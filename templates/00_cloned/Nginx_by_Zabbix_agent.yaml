zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: f10fc491a20f4d0983147fe4c6d7c361
      name: Templates
  templates:
    - uuid: f95d97cc7ce142c6af4342b9d738c3b3
      template: 'Nginx by Zabbix agent'
      name: 'Nginx by Zabbix agent'
      description: |
        Get metrics from stub status module using Zabbix agent running on Linux
        https://nginx.ru/en/docs/http/ngx_http_stub_status_module.html
        
        You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/384765-discussion-thread-for-official-zabbix-template-nginx
        
        Generated by official Zabbix template tool "Templator"
      readme: |
        ## Overview
        
        This template is developed to monitor Nginx by Zabbix that works without any external scripts.
        Most of the metrics are collected in one go, thanks to Zabbix bulk data collection.
        
        The template `Nginx by Zabbix agent` - collects metrics by polling the [Module ngx_http_stub_status_module](https://nginx.ru/en/docs/http/ngx_http_stub_status_module.html) locally with Zabbix agent:
        
        ```text
        Active connections: 291
        server accepts handled requests
        16630948 16630948 31070465
        Reading: 6 Writing: 179 Waiting: 106
        ```
        
        Note that this template doesn't support HTTPS and redirects (limitations of `web.page.get`).
        
        It also uses Zabbix agent to collect `Nginx` Linux process statistics, such as CPU usage, memory usage and whether the process is running or not.
        
        
        ## Setup
        
        See the setup instructions for [ngx_http_stub_status_module](https://nginx.ru/en/docs/http/ngx_http_stub_status_module.html).
        Test the availability of the `http_stub_status_module` `nginx -V 2>&1 | grep -o with-http_stub_status_module`.
        
        Example configuration of Nginx:
        ```text
        location = /basic_status {
            stub_status;
            allow 127.0.0.1;
            allow ::1;
            deny all;
        }
        ```
        
        If you use another location, then don't forget to change the `Nginx status page path` host wizard configuration field.
        
        Example answer from Nginx:
        ```text
        Active connections: 291
        server accepts handled requests
        16630948 16630948 31070465
        Reading: 6 Writing: 179 Waiting: 106
        ```
        
        Note that this template doesn't support https and redirects (limitations of web.page.get).
        
      groups:
        - name: Templates
      items:
        - uuid: 9cb3a7a6173245b0ba3f137321ad7423
          name: 'Service response time'
          key: 'net.tcp.service.perf[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"]'
          value_type: FLOAT
          units: s
          tags:
            - tag: component
              value: application
            - tag: component
              value: health
        - uuid: 707208c2aca84e95abad63b874adc89e
          name: 'Service status'
          key: 'net.tcp.service[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"]'
          valuemap:
            name: 'Service state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            - tag: component
              value: application
            - tag: component
              value: health
        - uuid: d25ba1ae90734cc59d1b1e3325897a1d
          name: 'Connections accepted per second'
          type: DEPENDENT
          key: nginx.connections.accepted.rate
          value_type: FLOAT
          description: 'The total number of accepted client connections.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'server accepts handled requests\s+([0-9]+) ([0-9]+) ([0-9]+)'
                - \1
            - type: CHANGE_PER_SECOND
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: a0bccec0b7e94d8aa32b818c7209614a
          name: 'Connections active'
          type: DEPENDENT
          key: nginx.connections.active
          description: 'The current number of active client connections including waiting connections.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'Active connections: ([0-9]+)'
                - \1
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: 141dbd919cfa4a839b1264ad4181c5bd
          name: 'Connections dropped per second'
          type: DEPENDENT
          key: nginx.connections.dropped.rate
          value_type: FLOAT
          description: 'The total number of dropped client connections.'
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - |
                  var a = value.match(/server accepts handled requests\s+([0-9]+) ([0-9]+) ([0-9]+)/)
                  if (a) {
                  	return a[1]-a[2]
                  }
                  
            - type: CHANGE_PER_SECOND
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: e7e35f40733841e0b76a8436ad6af810
          name: 'Connections handled per second'
          type: DEPENDENT
          key: nginx.connections.handled.rate
          value_type: FLOAT
          description: 'The total number of handled connections. Generally, the parameter value is the same as for the accepted connections, unless some resource limits have been reached (for example, the `worker_connections limit`).'
          preprocessing:
            - type: REGEX
              parameters:
                - 'server accepts handled requests\s+([0-9]+) ([0-9]+) ([0-9]+)'
                - \2
            - type: CHANGE_PER_SECOND
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: 2f288b020cdf4accad6ddd3538608b1f
          name: 'Connections reading'
          type: DEPENDENT
          key: nginx.connections.reading
          description: 'The current number of connections where Nginx is reading the request header.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'Reading: ([0-9]+) Writing: ([0-9]+) Waiting: ([0-9]+)'
                - \1
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: 89112f79058c41f989a8bb43f26fa96b
          name: 'Connections waiting'
          type: DEPENDENT
          key: nginx.connections.waiting
          description: 'The current number of idle client connections waiting for a request.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'Reading: ([0-9]+) Writing: ([0-9]+) Waiting: ([0-9]+)'
                - \3
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: 8988eead68ef471398852ac9a6161901
          name: 'Connections writing'
          type: DEPENDENT
          key: nginx.connections.writing
          description: 'The current number of connections where Nginx is writing a response back to the client.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'Reading: ([0-9]+) Writing: ([0-9]+) Waiting: ([0-9]+)'
                - \2
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: connections
        - uuid: c7a9dc5ff27e427f951fe98b00d04057
          name: 'Requests total'
          type: DEPENDENT
          key: nginx.requests.total
          description: 'The total number of client requests.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'server accepts handled requests\s+([0-9]+) ([0-9]+) ([0-9]+)'
                - \3
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: requests
        - uuid: 5061d6bbb72e41c1867a46da6b248717
          name: 'Requests per second'
          type: DEPENDENT
          key: nginx.requests.total.rate
          value_type: FLOAT
          description: 'The total number of client requests.'
          preprocessing:
            - type: REGEX
              parameters:
                - 'server accepts handled requests\s+([0-9]+) ([0-9]+) ([0-9]+)'
                - \3
            - type: CHANGE_PER_SECOND
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: requests
        - uuid: 735a45b54e6647239568f87d30f5fdd9
          name: Version
          type: DEPENDENT
          key: nginx.version
          value_type: CHAR
          preprocessing:
            - type: REGEX
              parameters:
                - '(?i)Server: nginx\/(.+(?<!\r))'
                - \1
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: d62d369971404ab6bbb2c36c10472b19
              expression: 'last(/Nginx by Zabbix agent/nginx.version,#1)<>last(/Nginx by Zabbix agent/nginx.version,#2) and length(last(/Nginx by Zabbix agent/nginx.version))>0'
              name: 'Nginx: Version has changed'
              event_name: 'Nginx: Version has changed (new version: {ITEM.VALUE})'
              priority: INFO
              description: 'The Nginx version has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 15e04e81ff8f4c3bbf4dca4e5849ed62
          name: 'Get processes summary'
          key: 'proc.get[{$NGINX.PROCESS.NAME.PARAMETER},,,summary]'
          history: '0'
          value_type: TEXT
          description: 'The aggregated data of summary metrics for all processes.'
          tags:
            - tag: component
              value: raw
        - uuid: 818e56c780d4436a86523731728b4a84
          name: 'Get stub status page'
          key: 'web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"]'
          history: 1h
          value_type: TEXT
          description: |
            The following status information is provided:
            `Active connections` - the current number of active client connections including waiting connections.
            `Accepted` - the total number of accepted client connections.
            `Handled` - the total number of handled connections. Generally, the parameter value is the same as for the accepted connections, unless some resource limits have been reached (for example, the `worker_connections` limit).
            `Requests` - the total number of client requests.
            `Reading` - the current number of connections where Nginx is reading the request header.
            `Writing` - the current number of connections where Nginx is writing a response back to the client.
            `Waiting` - the current number of idle client connections waiting for a request.
            
            See also [Module ngx_http_stub_status_module](https://nginx.org/en/docs/http/ngx_http_stub_status_module.html).
            
          tags:
            - tag: component
              value: application
            - tag: component
              value: health
      discovery_rules:
        - uuid: 8e487231b85a4bd8bb8d2533a95d0514
          name: 'Nginx process discovery'
          type: DEPENDENT
          key: nginx.proc.discovery
          filter:
            evaltype: AND
            conditions:
              - macro: '{#NGINX.NAME}'
                value: '{$NGINX.PROCESS_NAME}'
          description: 'The discovery of Nginx process summary.'
          item_prototypes:
            - uuid: 58e29dfda8a34fc9a73af85282b08235
              name: 'Get process data'
              type: DEPENDENT
              key: 'nginx.proc.get[{#NGINX.NAME}]'
              history: '0'
              value_type: TEXT
              description: 'The summary metrics aggregated by a process {#NGINX.NAME}.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.[?(@["name"]=="{#NGINX.NAME}")].first()'
                  error_handler: CUSTOM_VALUE
                  error_handler_params: 'Failed to retrieve process {#NGINX.NAME} data'
              master_item:
                key: 'proc.get[{$NGINX.PROCESS.NAME.PARAMETER},,,summary]'
              tags:
                - tag: component
                  value: raw
            - uuid: 898ad9ec0ea043eb9a58fa338ce8d6e1
              name: 'Number of running processes'
              type: DEPENDENT
              key: 'nginx.proc.num[{#NGINX.NAME}]'
              description: 'The number of running processes {#NGINX.NAME}.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.processes
                  error_handler: CUSTOM_VALUE
                  error_handler_params: '0'
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'nginx.proc.get[{#NGINX.NAME}]'
              tags:
                - tag: component
                  value: system
              trigger_prototypes:
                - uuid: c5515ec1b6534dd2b5646f55bec46c2d
                  expression: 'last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])=0'
                  name: 'Nginx: Process is not running'
                  priority: HIGH
                  tags:
                    - tag: scope
                      value: availability
            - uuid: 5a39b0e23c284fa49e31836dd2f524e7
              name: 'Memory usage, %'
              type: DEPENDENT
              key: 'nginx.proc.pmem[{#NGINX.NAME}]'
              value_type: FLOAT
              units: '%'
              description: 'The percentage of real memory used by a process {#NGINX.NAME}.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.pmem
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'nginx.proc.get[{#NGINX.NAME}]'
              tags:
                - tag: component
                  value: memory
            - uuid: 4ee057ba0054485aa1aaed992bbd457c
              name: 'Memory usage (rss)'
              type: DEPENDENT
              key: 'nginx.proc.rss[{#NGINX.NAME}]'
              units: B
              description: 'The summary of resident set size memory used by a process {#NGINX.NAME} expressed in bytes.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.rss
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'nginx.proc.get[{#NGINX.NAME}]'
              tags:
                - tag: component
                  value: memory
            - uuid: d447025face04616bc1edc0dcdf0a1da
              name: 'Memory usage (vsize)'
              type: DEPENDENT
              key: 'nginx.proc.vmem[{#NGINX.NAME}]'
              units: B
              description: 'The summary of virtual memory used by a process {#NGINX.NAME} expressed in bytes.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.vsize
                  error_handler: DISCARD_VALUE
              master_item:
                key: 'nginx.proc.get[{#NGINX.NAME}]'
              tags:
                - tag: component
                  value: memory
            - uuid: de9d48f7fca949c98775403e4710932d
              name: 'CPU utilization'
              key: 'proc.cpu.util[{#NGINX.NAME}]'
              value_type: FLOAT
              units: '%'
              description: 'The percentage of the CPU utilization by a process {#NGINX.NAME}.'
              tags:
                - tag: component
                  value: cpu
                - tag: software
                  value: nginx
          trigger_prototypes:
            - uuid: bda058be71184a7294c37d93b8f6a89d
              expression: |
                (find(/Nginx by Zabbix agent/web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"],,"iregexp","HTTP\\/[\\d.]+\\s+200")=0 or
                nodata(/Nginx by Zabbix agent/web.page.get["{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PATH}","{$NGINX.STUB_STATUS.PORT}"],30m)) and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0
              name: 'Nginx: Failed to fetch stub status page'
              event_name: 'Nginx: Failed to fetch stub status page (or no data for 30m)'
              priority: WARNING
              description: 'Zabbix has not received any data for items for the last 30 minutes.'
              manual_close: 'YES'
              dependencies:
                - name: 'Nginx: Service is down'
                  expression: 'last(/Nginx by Zabbix agent/net.tcp.service[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"])=0 and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0'
              tags:
                - tag: scope
                  value: availability
            - uuid: 5ba0bf1d3c8c437799eae8fc7fb93478
              expression: 'min(/Nginx by Zabbix agent/nginx.connections.dropped.rate,5m) > {$NGINX.DROP_RATE.MAX.WARN} and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0'
              name: 'Nginx: High connections drop rate'
              event_name: 'Nginx: High connections drop rate (more than {$NGINX.DROP_RATE.MAX.WARN} for 5m)'
              opdata: 'Current rate: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'The rate of dropping connections has been greater than {$NGINX.DROP_RATE.MAX.WARN} for the last 5 minutes.'
              dependencies:
                - name: 'Nginx: Service is down'
                  expression: 'last(/Nginx by Zabbix agent/net.tcp.service[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"])=0 and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0'
              tags:
                - tag: scope
                  value: performance
            - uuid: f33ebb898a1a4418bc6d4ece1690cceb
              expression: 'last(/Nginx by Zabbix agent/net.tcp.service[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"])=0 and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0'
              name: 'Nginx: Service is down'
              priority: AVERAGE
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: availability
            - uuid: 5a16c8cb28214a7fa00cc0baacec52d4
              expression: 'min(/Nginx by Zabbix agent/net.tcp.service.perf[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"],5m)>{$NGINX.RESPONSE_TIME.MAX.WARN} and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0'
              name: 'Nginx: Service response time is too high'
              event_name: 'Nginx: Service response time is too high (over {$NGINX.RESPONSE_TIME.MAX.WARN}s for 5m)'
              priority: WARNING
              manual_close: 'YES'
              dependencies:
                - name: 'Nginx: Service is down'
                  expression: 'last(/Nginx by Zabbix agent/net.tcp.service[http,"{$NGINX.STUB_STATUS.HOST}","{$NGINX.STUB_STATUS.PORT}"])=0 and last(/Nginx by Zabbix agent/nginx.proc.num[{#NGINX.NAME}])>0'
              tags:
                - tag: scope
                  value: performance
          graph_prototypes:
            - uuid: 8697f7953b094167b8517d36288a8149
              name: 'Nginx: Memory usage[{#NGINX.NAME}]'
              graph_items:
                - drawtype: BOLD_LINE
                  color: 199C0D
                  item:
                    host: 'Nginx by Zabbix agent'
                    key: 'nginx.proc.vmem[{#NGINX.NAME}]'
                - sortorder: '1'
                  drawtype: BOLD_LINE
                  color: F63100
                  item:
                    host: 'Nginx by Zabbix agent'
                    key: 'nginx.proc.rss[{#NGINX.NAME}]'
          master_item:
            key: 'proc.get[{$NGINX.PROCESS.NAME.PARAMETER},,,summary]'
          lld_macro_paths:
            - lld_macro: '{#NGINX.NAME}'
              path: $.name
      tags:
        - tag: class
          value: software
        - tag: subclass
          value: webserver
        - tag: target
          value: nginx
      macros:
        - macro: '{$NGINX.DROP_RATE.MAX.WARN}'
          value: '1'
          description: 'The critical rate of the dropped connections for a trigger expression.'
          config:
            type: TEXT
            priority: '7'
            section_name: Thresholds
            label: 'Critical rate of the dropped connections'
            description: 'Critical rate of the dropped connections for a trigger expression. No less than 0.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$NGINX.PROCESS.NAME.PARAMETER}'
          description: 'The process name of the Nginx server used in the item key `proc.get`. It could be specified if the correct process name is known.'
          config:
            type: TEXT
            priority: '5'
            label: 'Nginx process name'
            description: 'Process name of the Nginx server Used in the item key `proc.get`.'
        - macro: '{$NGINX.PROCESS_NAME}'
          value: nginx
          description: 'The process name filter for the Nginx process discovery.'
          config:
            type: TEXT
            priority: '4'
            section_name: Filters
            label: 'Nginx process name LLD filter'
            description: 'Process name filter for the Nginx process discovery.'
        - macro: '{$NGINX.RESPONSE_TIME.MAX.WARN}'
          value: '10'
          description: 'The maximum response time of Nginx expressed in seconds for a trigger expression.'
          config:
            type: TEXT
            priority: '6'
            section_name: Thresholds
            label: 'Maximum Nginx response time'
            description: 'Maximum response time of Nginx expressed in seconds for a trigger expression. No less than 0.'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
        - macro: '{$NGINX.STUB_STATUS.HOST}'
          value: localhost
          description: 'The hostname or IP address of the Nginx host or Nginx container of `astub_status`.'
          config:
            type: TEXT
            priority: '1'
            label: 'Nginx status host'
            description: 'Hostname or IP address of the Nginx host or Nginx container of a stub_status.'
            required: 'YES'
        - macro: '{$NGINX.STUB_STATUS.PATH}'
          value: basic_status
          description: 'The path of the `Nginx stub_status` page.'
          config:
            type: TEXT
            priority: '2'
            label: 'Nginx status page path'
            description: 'Path of the `Nginx stub_status` page.'
            required: 'YES'
        - macro: '{$NGINX.STUB_STATUS.PORT}'
          value: '80'
          description: 'The port of the `Nginx stub_status` host or container.'
          config:
            type: TEXT
            priority: '3'
            label: 'Nginx status page port'
            description: 'Port of the `Nginx stub_status` host or container. In the range from 1 to 65535 inclusive.'
            required: 'YES'
            regex: '^-?([0-9]+|(([0-9]+)\.([0-9]+)))$'
      dashboards:
        - uuid: 078e3692643a45198ddb7dc45e1dfb99
          name: 'Nginx performance'
          pages:
            - widgets:
                - type: graph
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Nginx by Zabbix agent'
                        name: 'Nginx: Connections by state'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Nginx by Zabbix agent'
                        name: 'Nginx: Connections per second'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: graph
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Nginx by Zabbix agent'
                        name: 'Nginx: Requests per second'
                    - type: STRING
                      name: reference
                      value: AAAAB
      valuemaps:
        - uuid: 18cef994aca645839a366e7d9ef5e17e
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
  graphs:
    - uuid: 581c249245414fbab93988d8d6753d56
      name: 'Nginx: Connections by state'
      graph_items:
        - drawtype: BOLD_LINE
          color: 199C0D
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.active
        - sortorder: '1'
          color: F63100
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.waiting
        - sortorder: '2'
          color: 00611C
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.writing
        - sortorder: '3'
          color: F7941D
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.reading
    - uuid: e68039b0d5f04ac1b88b66b1e708e07d
      name: 'Nginx: Connections per second'
      graph_items:
        - color: 199C0D
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.accepted.rate
        - sortorder: '1'
          color: F63100
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.handled.rate
        - sortorder: '2'
          color: 00611C
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.connections.dropped.rate
    - uuid: fffe323eb6644a7994659da712eab692
      name: 'Nginx: Requests per second'
      graph_items:
        - drawtype: GRADIENT_LINE
          color: 199C0D
          item:
            host: 'Nginx by Zabbix agent'
            key: nginx.requests.total.rate
